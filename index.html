<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="build/nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body class='with-3d-shadow with-transitions'>
<button onclick="expandLegend();">Mostrar / Ocultar Leyendas</button>
    <script>
        var expandLegend = function() {
            var exp = chart.legend.expanded();
            chart.legend.expanded(!exp);
            chart.update();
        }
    </script>
<svg id="chart1"></svg>

<script>

    var histcatexplong = [
        {
            "key" : "Animal Muerto" ,
            "values" : [ [1470625200000,1],[1471230000000,3],[1471834800000,1],[1472439600000,3],[1473044400000,2],[1473649200000,0],[1474254000000,0],[1474858800000,1],[1475463600000,0],[1476068400000,1],[1476673200000,2],[1477278000000,2],[1477882800000,0],[1478487600000,1],[1479092400000,3],[1479697200000,0] ]
        } ,
        {
            "key" : "Auto Abandonado en Vía Pública" ,
            "values" : [ [1470625200000,8],[1471230000000,11],[1471834800000,7],[1472439600000,5],[1473044400000,10],[1473649200000,2],[1474254000000,1],[1474858800000,3],[1475463600000,2],[1476068400000,2],[1476673200000,3],[1477278000000,7],[1477882800000,5],[1478487600000,9],[1479092400000,4],[1479697200000,1]]
        } ,
        {
            "key" : "Bacheo" ,
            "values" : [ [1470625200000,69],[1471230000000,76],[1471834800000,38],[1472439600000,34],[1473044400000,49],[1473649200000,34],[1474254000000,32],[1474858800000,33],[1475463600000,26],[1476068400000,26],[1476673200000,12],[1477278000000,48],[1477882800000,41],[1478487600000,42],[1479092400000,37],[1479697200000,34] ]
        },
        {
            "key" : "Columna Electrificada" ,
            "values" : [ [1470625200000,0]
,[1471230000000,2]
,[1471834800000,2]
,[1472439600000,4]
,[1473044400000,0]
,[1473649200000,0]
,[1474254000000,1]
,[1474858800000,0]
,[1475463600000,0]
,[1476068400000,1]
,[1476673200000,0]
,[1477278000000,0]
,[1477882800000,1]
,[1478487600000,0]
,[1479092400000,0]
,[1479697200000,0]
]
        }
        ,
        {
            "key" : "Cordones" ,
            "values" : [ [1470625200000,5]
,[1471230000000,2]
,[1471834800000,2]
,[1472439600000,2]
,[1473044400000,0]
,[1473649200000,2]
,[1474254000000,2]
,[1474858800000,3]
,[1475463600000,6]
,[1476068400000,1]
,[1476673200000,1]
,[1477278000000,2]
,[1477882800000,1]
,[1478487600000,1]
,[1479092400000,1]
,[1479697200000,0]
]
        },
        {
            "key" : "Corte de pasto" ,
            "values" : [ [1470625200000,1]
,[1471230000000,3]
,[1471834800000,3]
,[1472439600000,11]
,[1473044400000,5]
,[1473649200000,3]
,[1474254000000,6]
,[1474858800000,14]
,[1475463600000,17]
,[1476068400000,9]
,[1476673200000,8]
,[1477278000000,21]
,[1477882800000,35]
,[1478487600000,20]
,[1479092400000,27]
,[1479697200000,21]
]
        },
        {
            "key" : "Corte pasto edificios públicos" ,
            "values" : [ [1470625200000,0]
,[1471230000000,0]
,[1471834800000,1]
,[1472439600000,0]
,[1473044400000,1]
,[1473649200000,0]
,[1474254000000,0]
,[1474858800000,2]
,[1475463600000,0]
,[1476068400000,3]
,[1476673200000,1]
,[1477278000000,4]
,[1477882800000,18]
,[1478487600000,2]
,[1479092400000,2]
,[1479697200000,1]
]
        },
        {
            "key" : "Desagues" ,
            "values" : [ [1470625200000,16]
,[1471230000000,12]
,[1471834800000,12]
,[1472439600000,14]
,[1473044400000,14]
,[1473649200000,10]
,[1474254000000,10]
,[1474858800000,9]
,[1475463600000,14]
,[1476068400000,17]
,[1476673200000,6]
,[1477278000000,14]
,[1477882800000,12]
,[1478487600000,21]
,[1479092400000,8]
,[1479697200000,18]
]
        },
        {
            "key" : "Edificios y Espacios públicos" ,
            "values" : [ [1470625200000,4]
,[1471230000000,6]
,[1471834800000,5]
,[1472439600000,2]
,[1473044400000,4]
,[1473649200000,3]
,[1474254000000,2]
,[1474858800000,5]
,[1475463600000,4]
,[1476068400000,9]
,[1476673200000,4]
,[1477278000000,3]
,[1477882800000,10]
,[1478487600000,3]
,[1479092400000,2]
,[1479697200000,1]
]
        },
        {
            "key" : "Escombros" ,
            "values" : [ [1470625200000,2]
,[1471230000000,6]
,[1471834800000,2]
,[1472439600000,5]
,[1473044400000,2]
,[1473649200000,1]
,[1474254000000,3]
,[1474858800000,3]
,[1475463600000,1]
,[1476068400000,1]
,[1476673200000,0]
,[1477278000000,2]
,[1477882800000,1]
,[1478487600000,0]
,[1479092400000,2]
,[1479697200000,0]
]
        },
        {
            "key" : "Limpieza de zanja" ,
            "values" : [ [1470625200000,37]
,[1471230000000,50]
,[1471834800000,36]
,[1472439600000,55]
,[1473044400000,42]
,[1473649200000,41]
,[1474254000000,40]
,[1474858800000,43]
,[1475463600000,23]
,[1476068400000,38]
,[1476673200000,24]
,[1477278000000,47]
,[1477882800000,47]
,[1478487600000,45]
,[1479092400000,34]
,[1479697200000,33]
]
        } 
        ,
        {
            "key" : "Semáforos y Luminarias" ,
            "values" : [ [1470625200000,13]
,[1471230000000,10]
,[1471834800000,17]
,[1472439600000,23]
,[1473044400000,12]
,[1473649200000,14]
,[1474254000000,5]
,[1474858800000,7]
,[1475463600000,19]
,[1476068400000,13]
,[1476673200000,5]
,[1477278000000,9]
,[1477882800000,21]
,[1478487600000,9]
,[1479092400000,14]
,[1479697200000,7]
]
        } ,
        {
            "key" : "Luz Apagada o Intermitente" ,
            "values" : [ [1470625200000,142]
,[1471230000000,109]
,[1471834800000,77]
,[1472439600000,130]
,[1473044400000,126]
,[1473649200000,112]
,[1474254000000,116]
,[1474858800000,112]
,[1475463600000,120]
,[1476068400000,100]
,[1476673200000,90]
,[1477278000000,120]
,[1477882800000,138]
,[1478487600000,130]
,[1479092400000,147]
,[1479697200000,107]
]
        } ,
        {
            "key" : "Nueva Plaza" ,
            "values" : [ [1470625200000,0]
,[1471230000000,0]
,[1471834800000,0]
,[1472439600000,1]
,[1473044400000,0]
,[1473649200000,1]
,[1474254000000,0]
,[1474858800000,2]
,[1475463600000,0]
,[1476068400000,0]
,[1476673200000,0]
,[1477278000000,0]
,[1477882800000,1]
,[1478487600000,0]
,[1479092400000,0]
,[1479697200000,0]
]
        } ,
        {
            "key" : "Nuevo refugio de colectivo" ,
            "values" : [ [1470625200000,0]
,[1471230000000,1]
,[1471834800000,0]
,[1472439600000,0]
,[1473044400000,0]
,[1473649200000,2]
,[1474254000000,2]
,[1474858800000,1]
,[1475463600000,0]
,[1476068400000,0]
,[1476673200000,0]
,[1477278000000,1]
,[1477882800000,1]
,[1478487600000,0]
,[1479092400000,2]
,[1479697200000,0]
]
        } ,
        {
            "key" : "Otros" ,
            "values" : [ [1470625200000,49]
,[1471230000000,81]
,[1471834800000,66]
,[1472439600000,55]
,[1473044400000,62]
,[1473649200000,71]
,[1474254000000,46]
,[1474858800000,71]
,[1475463600000,39]
,[1476068400000,53]
,[1476673200000,25]
,[1477278000000,50]
,[1477882800000,55]
,[1478487600000,57]
,[1479092400000,55]
,[1479697200000,52]

            ]
        } ,
        {
            "key" : "Pavimentación y bacheo" ,
            "values" : [ [1470625200000,32]
,[1471230000000,65]
,[1471834800000,41]
,[1472439600000,38]
,[1473044400000,28]
,[1473649200000,31]
,[1474254000000,26]
,[1474858800000,27]
,[1475463600000,26]
,[1476068400000,20]
,[1476673200000,20]
,[1477278000000,33]
,[1477882800000,53]
,[1478487600000,29]
,[1479092400000,29]
,[1479697200000,10]
]
        } ,
        {
            "key" : "Pedido de pavimento" ,
            "values" : [ [1470625200000,6]
,[1471230000000,3]
,[1471834800000,3]
,[1472439600000,5]
,[1473044400000,8]
,[1473649200000,2]
,[1474254000000,3]
,[1474858800000,3]
,[1475463600000,6]
,[1476068400000,3]
,[1476673200000,1]
,[1477278000000,2]
,[1477882800000,13]
,[1478487600000,1]
,[1479092400000,5]
,[1479697200000,6]
]
        }
         ,
        {
            "key" : "Perfilado" ,
            "values" : [ 
            [1470625200000,69]
,[1471230000000,109]
,[1471834800000,45]
,[1472439600000,69]
,[1473044400000,71]
,[1473649200000,58]
,[1474254000000,69]
,[1474858800000,81]
,[1475463600000,28]
,[1476068400000,37]
,[1476673200000,23]
,[1477278000000,55]
,[1477882800000,55]
,[1478487600000,60]
,[1479092400000,45]
,[1479697200000,55]
]
        }  ,
        {
            "key" : "Poda" ,
            "values" : [ [1470625200000,44]
,[1471230000000,33]
,[1471834800000,39]
,[1472439600000,35]
,[1473044400000,16]
,[1473649200000,13]
,[1474254000000,19]
,[1474858800000,15]
,[1475463600000,11]
,[1476068400000,11]
,[1476673200000,9]
,[1477278000000,26]
,[1477882800000,31]
,[1478487600000,27]
,[1479092400000,25]
,[1479697200000,17]
]
        } ,
        {
            "key" : "Poda y espacios verdes" ,
            "values" : [ [1470625200000,5]
,[1471230000000,3]
,[1471834800000,8]
,[1472439600000,3]
,[1473044400000,5]
,[1473649200000,3]
,[1474254000000,4]
,[1474858800000,9]
,[1475463600000,7]
,[1476068400000,1]
,[1476673200000,0]
,[1477278000000,0]
,[1477882800000,10]
,[1478487600000,6]
,[1479092400000,12]
,[1479697200000,2]
]
        } ,
        {
            "key" : "Poste roto o caido" ,
            "values" : [ [1470625200000,8]
,[1471230000000,1]
,[1471834800000,8]
,[1472439600000,9]
,[1473044400000,4]
,[1473649200000,2]
,[1474254000000,8]
,[1474858800000,4]
,[1475463600000,14]
,[1476068400000,2]
,[1476673200000,5]
,[1477278000000,3]
,[1477882800000,4]
,[1478487600000,5]
,[1479092400000,3]
,[1479697200000,4]
]
        } ,
        {
            "key" : "Proteccion Animal" ,
            "values" : [ [1470625200000,0]
,[1471230000000,1]
,[1471834800000,1]
,[1472439600000,1]
,[1473044400000,0]
,[1473649200000,0]
,[1474254000000,0]
,[1474858800000,0]
,[1475463600000,0]
,[1476068400000,1]
,[1476673200000,3]
,[1477278000000,2]
,[1477882800000,0]
,[1478487600000,2]
,[1479092400000,1]
,[1479697200000,2]
]
        } ,
        {
            "key" : "Ramas" ,
            "values" : [ [1470625200000,95]
,[1471230000000,103]
,[1471834800000,117]
,[1472439600000,139]
,[1473044400000,102]
,[1473649200000,65]
,[1474254000000,83]
,[1474858800000,112]
,[1475463600000,102]
,[1476068400000,72]
,[1476673200000,58]
,[1477278000000,46]
,[1477882800000,78]
,[1478487600000,76]
,[1479092400000,92]
,[1479697200000,54]
]
        } ,
        {
            "key" : "Recoleccion de ramas" ,
            "values" : [ [1470625200000,48]
,[1471230000000,65]
,[1471834800000,39]
,[1472439600000,38]
,[1473044400000,32]
,[1473649200000,34]
,[1474254000000,34]
,[1474858800000,62]
,[1475463600000,41]
,[1476068400000,38]
,[1476673200000,26]
,[1477278000000,35]
,[1477882800000,41]
,[1478487600000,54]
,[1479092400000,61]
,[1479697200000,25]
]
        } ,
        {
            "key" : "Residuos" ,
            "values" : [ [1470625200000,19]
,[1471230000000,20]
,[1471834800000,20]
,[1472439600000,16]
,[1473044400000,19]
,[1473649200000,4]
,[1474254000000,21]
,[1474858800000,12]
,[1475463600000,8]
,[1476068400000,13]
,[1476673200000,14]
,[1477278000000,8]
,[1477882800000,18]
,[1478487600000,12]
,[1479092400000,7]
,[1479697200000,10]
]
        }
        ,
        {
            "key" : "Semaforo apagado" ,
            "values" : [ [1470625200000,2]
,[1471230000000,2]
,[1471834800000,1]
,[1472439600000,4]
,[1473044400000,2]
,[1473649200000,1]
,[1474254000000,0]
,[1474858800000,2]
,[1475463600000,1]
,[1476068400000,1]
,[1476673200000,3]
,[1477278000000,2]
,[1477882800000,2]
,[1478487600000,8]
,[1479092400000,1]
,[1479697200000,3]
]
        },
        {
            "key" : "Semaforo Intermitente" ,
            "values" : [ [1470625200000,1]
,[1471230000000,0]
,[1471834800000,1]
,[1472439600000,0]
,[1473044400000,2]
,[1473649200000,1]
,[1474254000000,5]
,[1474858800000,2]
,[1475463600000,1]
,[1476068400000,0]
,[1476673200000,0]
,[1477278000000,0]
,[1477882800000,1]
,[1478487600000,0]
,[1479092400000,0]
,[1479697200000,0]
]
        },
        {
            "key" : "Zanja Nueva" ,
            "values" : [ [1470625200000,12]
,[1471230000000,15]
,[1471834800000,8]
,[1472439600000,17]
,[1473044400000,14]
,[1473649200000,6]
,[1474254000000,13]
,[1474858800000,11]
,[1475463600000,5]
,[1476068400000,7]
,[1476673200000,4]
,[1477278000000,15]
,[1477882800000,6]
,[1478487600000,9]
,[1479092400000,11]
,[1479697200000,7]
]
        } 
        ];

    var colors = d3.scale.category20();

    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Acumulado"})
            .duration(300);

        chart.xAxis.tickFormat(function(d) { return d3.time.format('%x')(new Date(d)) });
        chart.yAxis.tickFormat(d3.format(',.0f'));

        chart.legend.vers('furious');

        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function() {
                setTimeout(function() {
                    d3.selectAll('#chart1 *').each(function() {
                        if(this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });

        nv.utils.windowResize(chart.update);
        return chart;
    });


</script>
</body>
</html>
